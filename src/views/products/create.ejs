<!DOCTYPE html>
<html lang="es">

<head>
    <%- include('../partials/head') %>
</head>

<body>

    <%- include('../partials/header') %>

        <div class="form-container product-form">
            <h2>Crear Producto</h2>

            <form action="/products" method="POST" enctype="multipart/form-data">
                <label for="name">Nombre del producto</label>
                <input type="text" id="name" name="name" placeholder="Ej: Notebook Gamer"
                    value="<%= locals.oldData ? oldData.name : '' %>" required minlength="5">
                <% if (locals.errors && errors.name) { %>
                    <p class="error-msg" style="color: red; font-size: 0.9rem;">
                        <%= errors.name.msg %>
                    </p>
                    <% } %>

                        <label for="description">Descripción</label>
                        <textarea id="description" name="description" placeholder="Descripción detallada..."
                            minlength="20"><%= locals.oldData ? oldData.description : '' %></textarea>
                        <% if (locals.errors && errors.description) { %>
                            <p class="error-msg" style="color: red; font-size: 0.9rem;">
                                <%= errors.description.msg %>
                            </p>
                            <% } %>

                                <label for="image">Imagen</label>
                                <input type="file" id="image" name="image">
                                <% if (locals.errors && errors.image) { %>
                                    <p class="error-msg" style="color: red; font-size: 0.9rem;">
                                        <%= errors.image.msg %>
                                    </p>
                                    <% } %>

                                        <label for="category">Categoría</label>
                                        <select id="category" name="category">
                                            <option value="computacion">Computación</option>
                                            <option value="audio">Audio</option>
                                            <option value="gaming">Gaming</option>
                                            <option value="ofertas">Ofertas</option>
                                        </select>

                                        <label for="brand_id">Marca</label>
                                        <select id="brand_id" name="brand_id">
                                            <% if (typeof brands !=='undefined' && brands.length> 0) { %>
                                                <% brands.forEach(brand=> { %>
                                                    <option value="<%= brand.id %>">
                                                        <%= brand.name %>
                                                    </option>
                                                    <% }); %>
                                                        <% } else { %>
                                                            <option value="">No hay marcas</option>
                                                            <% } %>
                                        </select>

                                        <label for="colors">Colores</label>
                                        <input type="text" id="colors" name="colors" placeholder="Ej: Negro, Blanco">

                                        <label for="price">Precio</label>
                                        <input type="number" id="price" name="price" placeholder="Ej: 850000" required>

                                        <button type="submit">GUARDAR PRODUCTO</button>
            </form>
        </div>

        <%- include('../partials/footer') %>

</body>

</html>